<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>A Commentary on Comments - The Endless Obsession
    </title>
    <meta name="author" content="Bryan Matthews">
    <meta name="description" content="The personal blog of Bryan Matthews"><!-- Viewport and Media Queries: http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="http://endlessobsession.com/" rel="canonical">
    <link href="/infinity-symbol.png" rel="icon">
    <link href="/atom.xml" rel="alternate" type="application/atom+xml" title="The Endless Obsession">
    <link href="/stylesheets/normalize-3.0.2.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/theme-2.0.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/tomorrow.css" media="screen, projection" rel="stylesheet" type="text/css">
  </head>
  <body>
    <div class="container">
      <header role="banner">
        <hgroup>
          <h1><a href="http://endlessobsession.com/">The Endless Obsession</a></h1><small>better code</small>
        </hgroup>
        <nav role="navigation">
          <ul>
            <li><a href="http://endlessobsession.com/">Home</a></li>
            <li><a href="http://endlessobsession.com/about" rel="author">About</a></li>
            <li><a href="http://endlessobsession.com/blog/archives">Archives</a></li>
          </ul>
          <form action="http://google.com/search">
            <fieldset role="search">
              <input type="hidden" name="q" value="site:http://endlessobsession.com/">
              <input type="text" name="q" results="0" placeholder="Search" class="search">
            </fieldset>
          </form>
        </nav>
        <nav role="complementary">
          <ul>
            <li><a href="/atom.xml" title="RSS">RSS</a></li>
            <li><a href="https://github.com/mattheyan" title="Github: mattheyan" target="_blank">Github</a></li>
            <li><a href="https://twitter.com/BryanMatthews" title="Twitter: @BryanMatthews" target="_blank">Twitter</a></li>
          </ul>
        </nav>
      </header>
      <main>
        <article>
          <header>
            <h2 class="title">A Commentary on Comments</h2>
            <div class="byline"><span class="author">Bryan Matthews</span>
              <time datetime="2016-05-12" pubdate>May 12th, 2016</time>
            </div>
          </header>
          <section><pre><code class="lang-javascript"><span class="comment">// <span class="caps">TODO</span>: Improve post intro before publishing to the interwebs.</span>
</code></pre>
<p>Comments are probably one of the most boring topics you can&nbsp;imagine.</p>
<p>Plus, they’re so easy to&nbsp;write?</p>
<p>And yet, somehow I get the feeling we’re doing it&nbsp;wrong.</p>
<p>Have you ever tried in vain to understand why a bit of code was doing something
that made no sense, and wished that the author had left you a clue as to their
intentions at the time (in the comments,&nbsp;perhaps)?</p>
<p>Or, have you ever looked at a bit of code, and then the comments attached to it,
and then back at the code, and then the comments… and wondered, “Am I not
getting something about this code, or is this comment just plain wrong?” (Hint:
the comment is <em>probably</em>&nbsp;wrong.)</p>
<p>Finally, think back to the last time you looked at a comment and thought to yourself,
“hmm, that was actually&nbsp;useful”.</p>
<hr>
<p>“Wait a minute, are comments even worth writing about?”, you may be wondering. “Couldn’t
you write about something more important, like how to run a web server on your
wi-fi connected refrigerator using&nbsp;icecream.js?”</p>
<p>And this, I think, is part of the problem. We’re too quick to write it off as unimportant. We just don’t seem to care all that much, because, you know, it’s not&nbsp;code.</p>
<p>Sure, I’ll concede that code comments are not the greatest challenge of our
profession. You’re not going to win a Turing award for your great comments. And
you won’t win any cool points with your friends either. But, I do think its
worth writing about, because its an important part of the <em>craft</em> of writing
good&nbsp;software.</p>
<blockquote>
<p>Software spend only 10% time of its life in development and rest of 90% in
maintenance. This 90% part of maintaining the code is where comment can help
you&nbsp;immensely.</p>
<p>- <a href="http://javarevisited.blogspot.com/2011/08/code-comments-java-best-practices.html">10 Best Practices to Follow while writing Code&nbsp;Comments</a></p>
</blockquote>
<p>In my opinion, good comments are an important complement to good code, making it
much more clear and easy to&nbsp;understand.</p>
<p>Conversely, bad comments can be confusing, contradictory,
misleading, or just plain&nbsp;messy.</p>
<p>So, if comments really do make a difference, what should we do about it? How can we use them
to make our software better instead of&nbsp;worse?</p>
<h2 id="what-how-and-why">What, How, and&nbsp;Why</h2>
<p>There’s a great quote on the topic that’s referenced over and over again
in one form or another, courtesy of Steve McConnell from his excellent book
“Code Complete” (a must-read if you haven’t&nbsp;already).</p>
<blockquote>
<p>Comments should explain the why instead of the how or&nbsp;what.</p>
<p>- Steve McConnell, “<a href="http://en.wikipedia.org/wiki/Code_Complete">Code Complete</a>“</p>
</blockquote>
<p>Take a moment and let that sink&nbsp;in…</p>
<p>This distinction between what, how, and why is the foundation for writing
useful comments. And that’s really the crux of it all, you
have to stop and think about whether the comment you’re writing is as useful as
it could be, or if its even useful at all.&nbsp;Because…</p>
<blockquote>
<p>The best kind of comments are the ones you don’t&nbsp;need.</p>
<p>- <a href="http://blog.codinghorror.com/when-good-comments-go-bad/">Coding Horror - When Good Comments Go&nbsp;Bad</a></p>
</blockquote>
<p>Comments shouldn’t be concerned with the questions of “what” or “how”.
Those topics fall squarely in the realm of the code. Well-crafted code should
make it clear what it’s doing and how it’s doing&nbsp;it.</p>
<blockquote>
<p>You should always write your code as if comments didn’t&nbsp;exist.</p>
<p>- <a href="http://blog.codinghorror.com/coding-without-comments/">Coding Horror - Coding Without&nbsp;Comments</a></p>
</blockquote>
<p>Now, I don’t want to give you the impression that I hate comments. They can be
quite invaluable in some cases. Specifically, when the “why” cannot be gleaned
from the&nbsp;code.</p>
<blockquote>
<p>You must at least write comments explaining the <strong>why</strong> of a chunk of&nbsp;code.</p>
<p>- <a href="http://sandmoose.com/post/16414516163/code-comments-should-explain-why-instead-of">Code Comments Should Explain ‘Why’ Instead Of&nbsp;‘What’</a></p>
</blockquote>
<p>This is important for a number of reasons: describing your thought process,
preventing well-meaning people from breaking the code, documenting unwritten
assumptions, describing the rationale for something based on customer demands,&nbsp;etc…</p>
<p>Essentially this all comes down to the fallibility of human memory and
communication. The computer (i.e. compiler, interpreter) can read your code five
years from now and determine what it should do, and if you’ve written it well
enough it will still function as intended. But, when <strong>you</strong> read your code five
years later and try to ascertain why you wrote it the way you did, you’re
probably going to end up scratching your head and wondering what that guy was
thinking. Now imagine how your future self’s coworkers will fare at the same
task. Oh, and you probably also neglected to share or document an important
detail of the customer’s requirements. Good luck&nbsp;suckers!</p>
<p>This is the hard part of the day to day work of software development. The algorithms
aren’t so complex that we can’t understand them. The requirements aren’t too
difficult. What <strong>is</strong> difficult is managing the accumulation of complexity over
time, and doing things in such a way that each team member has the knowledge
that they need to make the software better with each change,
<a href="http://9gag.com/gag/aGwRXOZ">without breaking things</a>.</p>
<p>Now, back to “Code&nbsp;Complete”…</p>
<h2 id="the-6-types-of-comments">The 6 Types of&nbsp;Comments</h2>
<p>Steve categorizes comments into 6 basic&nbsp;types:</p>
<ol>
<li><p>Repeat of the&nbsp;Code</p>
<pre><code class="lang-javascript"> <span class="comment">// set i equal to 5    </span>
 <span class="keyword">var</span> i = <span class="number">5</span>;
</code></pre>
<p> A repeat of the code is pointless. It adds no new information, so at best it
 is just useless noise. Please, don’t parrot your code in&nbsp;English.</p>
</li>
<li><p>Explanation of the&nbsp;Code</p>
<pre><code class="lang-javascript"> <span class="comment">// set the initial batch size to 5</span>
 <span class="keyword">var</span> s = <span class="number">5</span>;
</code></pre>
<p> A comment that is an explanation of the code is an indication that the code
 could be written more clearly. This might be a great <a href="http://simpleprogrammer.com/2015/04/13/why-comments-are-stupid-a-real-example/">opportunity to clean
 up the code</a> by extracting a well-named and documented method, or, renaming
 a variable so that the name more adequately conveys what it is
 (e.g. <code>var initialBatchSize = 5;</code>).</p>
</li>
<li><p>Marker in the&nbsp;Code</p>
<pre><code class="lang-javascript"> <span class="comment">// <span class="caps">TODO</span>: Really fix this!</span>
</code></pre>
<p> Do you really think that anyone is going to fix this? This sort of thing
 really belongs in a bug tracker. The source code is where TODOs go to die.
 <em><span class="caps">CAVEAT</span></em>: Tools can make this&nbsp;better…</p>
</li>
<li><p>Summary of the&nbsp;Code</p>
<pre><code class="lang-javascript"> <span class="comment">// Do the first thing, then the second</span>
 <span class="comment">// thing, and finally the third thing,</span>
 <span class="comment">// but only if the second thing succeeded.</span>
</code></pre>
<p> A summary of the code <strong>may</strong> be useful to describe a high-level algorithm
 in a way that humans can better understand it, and then refer back to when
 they’re digesting the code. I’m on the fence about this one, but I’ll
 concede that it has it’s&nbsp;place.</p>
</li>
<li><p>Description of the Code’s&nbsp;Intent</p>
<pre><code class="lang-javascript"> <span class="comment">// Determine the default access level</span>
 <span class="comment">// based on the current user's role</span>
 <span class="comment">// because X, Y, and Z.</span>
</code></pre>
<p> In my opinion, this is a really good use for code comments. Explain what you
 intend for the code to do at a high-level, and write it in such a way that
 it’s useful and cannot be easily ignored. This often incorporates the “why”
 that we’ve been talking about. Again, this information <strong>cannot</strong> be
 expressed in code, and the code <strong>cannot</strong> be fully understood without&nbsp;it.</p>
</li>
<li><p>Other Information that Cannot Possibly be Expressed by the Code&nbsp;Itself</p>
<pre><code class="lang-javascript"> <span class="comment">// The native 'map' did not perform well</span>
 <span class="comment">// in this case, so use a loop instead</span>
 <span class="comment">// (as an optimization).</span>
</code></pre>
<p> This finally category covers other factors that may not be obvious in the
 code and have nothing to do with its intent: obscure optimizations,
 workarounds for libraries that don’t do quite what they say they do,
 compromises due to tight deadlines or temporary limitations in technology.
 Once again, the code <strong>cannot</strong> be fully understood without these comments.
 And when the code is not fully understood we make avoidable&nbsp;mistakes.</p>
</li>
</ol>
<h2 id="in-conclusion">In&nbsp;Conclusion</h2>
<p>Comments definitely have their place. Follow these two simple rules and your 
code will be better off with the comments that you write (or don’t&nbsp;write).</p>
<ol>
<li><p>Write your code so that it doesn’t require comments in order to understand
it. There are plenty of patterns and practice that can help with this. Find what works for&nbsp;you.</p>
</li>
<li><p>When you write comments, use them to express the “why”. Imagine that your
future coworker is a homicidal maniac who knows where you live, and make sure
he or she has all the information that they need to understand your code and
not hate you for it. Leave the questions of “how” and “what” to the code,
given that it can be fully understood (see point #1&nbsp;above).</p>
</li>
</ol>
<p>What do you think about it? Let me know in the&nbsp;comments.</p>
</section>
          <section>
            <h2>Comments</h2>
            <div id="disqus_thread"></div>
          </section>
        </article>
        <footer>
          <script type="text/javascript" src="/javascripts/disqus.js?v=2.0.0&amp;name=endlessobsession"></script><small>Copyright &copy; 2016 - Bryan Matthews &mdash; powered by&nbsp;<a href="https://github.com/jnordberg/wintersmith">Wintersmith</a></small>
          <script type="text/javascript" src="/javascripts/analytics.js?v=1.0.0&amp;id=UA-17782995-1"></script>
        </footer>
      </main>
    </div>
  </body>
</html>