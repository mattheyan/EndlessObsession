<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Tfs Rollback - The Endless Obsession
    </title>
    <meta name="author" content="Bryan Matthews">
    <meta name="description" content="The personal blog of Bryan Matthews"><!-- Viewport and Media Queries: http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="http://endlessobsession.com/" rel="canonical">
    <link href="/infinity-symbol.png" rel="icon">
    <link href="/atom.xml" rel="alternate" type="application/atom+xml" title="The Endless Obsession">
    <link href="/stylesheets/normalize-3.0.2.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/layout.css?v=1.0.0" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/theme.css?v=1.0.0" media="screen, projection" rel="stylesheet" type="text/css">
  </head>
  <body>
    <header role="banner">
      <hgroup>
        <h1><a href="http://endlessobsession.com/">The Endless Obsession</a></h1><small>better code</small>
      </hgroup>
      <nav role="complementary">
        <ul>
          <li><a href="/atom.xml" title="RSS">RSS</a></li>
          <li><a href="https://github.com/mattheyan" title="Github: mattheyan" target="_blank">Github</a></li>
          <li><a href="https://twitter.com/BryanMatthews" title="Twitter: @BryanMatthews" target="_blank">Twitter</a></li>
        </ul>
      </nav>
    </header>
    <nav role="navigation">
      <ul>
        <li><a href="http://endlessobsession.com/">Home</a></li>
        <li><a href="http://endlessobsession.com/about" rel="author">About</a></li>
        <li><a href="http://endlessobsession.com/blog/archives">Archives</a></li>
      </ul>
      <form action="http://google.com/search">
        <fieldset role="search">
          <input type="hidden" name="q" value="site:http://endlessobsession.com/">
          <input type="text" name="q" results="0" placeholder="Search" class="search">
        </fieldset>
      </form>
    </nav>
    <main>
      <article>
        <header>
          <time datetime="2011-07-08" pubdate>Jul 8th, 2011</time>
          <h2>Tfs Rollback</h2>
        </header>
        <section><p>Using the tf command line tool you can rollback all or part of a tfs checkin.  This is useful for two reasons: 1) If you at least want to roll back all changes in one or more file (not some changes in a file) then it saves you from having to manually revert changes (I’m a firm believer in not giving yourself the opportunity to goof up) , and 2) the checkin is actually marked as a <em>rollback</em>, so you don’t have to rely on checkin notes to identify it as&nbsp;such.</p>
<p>As a side note, based on what I’ve seen in the way that tfs represents changes, this rollback changeset is simply an add, edit or delete, with the additional information that it was a rollback of a prior change.  The original checkin is still in the tfs&nbsp;history.</p>
<p>To do a rollback, first open up the visual studio command prompt.  You should have a shortcut in your start menu.  On my machine the command is: <em><strong>%comspec% /k “”c:\Program Files (x86)\Microsoft Visual Studio 10.0\<span class="caps">VC</span>\vcvarsall.bat”” x86</strong></em>.</p>
<p>Here’s the help for tf rollback (using the command <em>tf rollback /?</em>):</p>
<p><span class="caps">TF</span> - Team Foundation Version Control Tool, Version&nbsp;10.0.30319.1</p>
<p>Copyright (c) Microsoft Corporation.  All rights&nbsp;reserved.</p>
<p>Rolls back the changes in a single or a range of&nbsp;changesets:</p>
<p>tf rollback /changeset:changesetfrom~changesetto [itemspec]&nbsp;[/recursive]</p>
<pre><code>        [/lock:none|checkin|checkout] [/version:versionspec]




        [/keepmergehistory] [/noprompt] [/login:username,[password]]
</code></pre><p>tf rollback /toversion:versionspec itemspec&nbsp;[/recursive]</p>
<pre><code>        [/lock:none|checkin|checkout] [/version:versionspec]




        [/keepmergehistory] [/noprompt] [/login:username,[password]]
</code></pre><p>Versionspec:</p>
<pre><code>Date/Time         D&quot;any .Net Framework-supported format&quot;




                  or any of the date formats of the local machine




Changeset number  Cnnnnnn




Label             Llabelname




Latest version    T




Workspace         Wworkspacename;workspaceowner
</code></pre><p>First, we need to make sure we are working within our&nbsp;workspace.</p>
<p><strong><em>cd&nbsp;path\to\workspace\root</em></strong></p>
<p>So, for example, we could rollback an entire&nbsp;changeset:</p>
<p><strong><em>tf rollback&nbsp;/changeset:12345</em></strong></p>
<p>Or, we can rollback a single item in the&nbsp;changeset:</p>
<p><strong><em>tf rollback /changeset:12345&nbsp;$/Path/To/Item</em></strong></p>
<p>There is also a login param that you can pass if&nbsp;needed:</p>
<p><strong><em>tf rollback /changeset:12345&nbsp;/login:domain\username,password</em></strong></p>
<p>Enjoy!</p>
</section>
        <section>
          <h2>Comments</h2>
          <div id="disqus_thread"></div>
        </section>
      </article>
      <nav role="navigation">
        <ul>
          <li><a href="/">« Full blog</a></li>
        </ul>
      </nav>
    </main>
    <footer>
      <script type="text/javascript" src="/javascripts/disqus.js?v=2.0.0&amp;name=endlessobsession"></script><small>Copyright &copy; 2015 - Bryan Matthews &mdash; powered by&nbsp;<a href="https://github.com/jnordberg/wintersmith">Wintersmith</a></small>
      <script type="text/javascript" src="/javascripts/analytics.js?v=1.0.0&amp;id=UA-17782995-1"></script>
    </footer>
  </body>
</html>