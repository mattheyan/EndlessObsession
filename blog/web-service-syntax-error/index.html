<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Web Service Syntax Error??? - The Endless Obsession
    </title>
    <meta name="author" content="Bryan Matthews">
    <meta name="description" content="The personal blog of Bryan Matthews"><!-- Viewport and Media Queries: http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="http://endlessobsession.com/" rel="canonical">
    <link href="/infinity-symbol.png" rel="icon">
    <link href="/atom.xml" rel="alternate" type="application/atom+xml" title="The Endless Obsession">
    <link href="/stylesheets/normalize-3.0.2.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/theme-2.0.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/tomorrow.css" media="screen, projection" rel="stylesheet" type="text/css">
  </head>
  <body>
    <div class="container">
      <header role="banner">
        <hgroup>
          <h1><a href="http://endlessobsession.com/">The Endless Obsession</a></h1><small>better code</small>
        </hgroup>
        <nav role="navigation">
          <ul>
            <li><a href="http://endlessobsession.com/">Home</a></li>
            <li><a href="http://endlessobsession.com/about" rel="author">About</a></li>
            <li><a href="http://endlessobsession.com/blog/archives">Blog</a></li>
          </ul>
          <form action="http://google.com/search">
            <fieldset role="search">
              <input type="hidden" name="q" value="site:http://endlessobsession.com/">
              <input type="text" name="q" results="0" placeholder="Search" class="search">
            </fieldset>
          </form>
        </nav>
        <nav role="complementary">
          <ul>
            <li><a href="/atom.xml" title="RSS">RSS</a></li>
            <li><a href="https://github.com/mattheyan" title="Github: mattheyan" target="_blank">Github</a></li>
            <li><a href="https://twitter.com/BryanMatthews" title="Twitter: @BryanMatthews" target="_blank">Twitter</a></li>
          </ul>
        </nav>
      </header>
      <main>
        <article>
          <header>
            <h2 class="title">Web Service Syntax Error???</h2>
            <div class="byline"><span class="author">Bryan Matthews</span>
              <time datetime="2010-06-10" pubdate>Jun 10th, 2010</time>
            </div>
          </header>
          <section><p><em>Originally posted April 7&nbsp;2010</em></p>
<p>Ok, I’ll start this post off with some background.  A couple of years ago I wrote a <span class="caps">SOAP</span> web service that manages printing for multiple users through a web application.  Sounds familiar, right?  Anyway, the client that interacts with the web service uses the Microsoft AJAX JavaScript framework (version 1).  The web service is hosted on a different server and domain.  However, since this is an internal application with a small number of users they were content to enable cross-domain data access and be done with&nbsp;it.</p>
<p>A few weeks ago one of my coworkers was revisiting the client portion, which just happened to be upgraded to the <a href="http://ajax.codeplex.com/">beta version of the <span class="caps">AJAX</span> JavaScript framework</a>.  He started to see a syntax error, which I determined was occurring when handling the web service response.  I knew that the client framework supported <span class="caps">JSONP</span> in some form, and I also noticed an interesting “jsonp” query string argument in the web service call.  Believe it or not, the client was trying to use JSONP, even though the web service response was XML!  This obviously would result in a syntax error when trying to&nbsp;deserialize.</p>
<p>After looking over the JavaScript code I determined that the WebServiceProxy was using <span class="caps">JSONP</span> if either the protocol or host of the request was different than the current page.  I now know in hindsight that the documentation (at least in code) of WebServiceProxy.invoke clearly states this.  Luckily, the “enableJsonp” parameter can be set to <em>false</em> to override this&nbsp;behavior.</p>
<p>So, the bottom line is:  if you’re accessing a web service across domains and you don’t want to use <span class="caps">JSONP</span>, you have to set the  “enableJsonp” argument to <em>false</em>.  Here’s the method signature and&nbsp;documentation…</p>
<pre><code class="lang-javascript">WebServiceProxy.invoke(servicePath, methodName, useGet, params, onSuccess, onFailure, userContext, timeout, enableJsonp, jsonpCallbackParameter) {
    <span class="comment">/// &lt;summary locid="M:J#Sys.Net.WebServiceProxy.invoke"&gt;&lt;/summary&gt;</span>
    <span class="comment">/// &lt;param name="servicePath" type="String"&gt;Path to the webservice&lt;/param&gt;</span>
    <span class="comment">/// &lt;param name="methodName" type="String" mayBeNull="true" optional="true"&gt;Method to invoke&lt;/param&gt;</span>
    <span class="comment">/// &lt;param name="useGet" type="Boolean" optional="true" mayBeNull="true"&gt;Controls whether requests use HttpGet&lt;/param&gt;</span>
    <span class="comment">/// &lt;param name="params" mayBeNull="true" optional="true"&gt;Method args.&lt;/param&gt;</span>
    <span class="comment">/// &lt;param name="onSuccess" type="Function" mayBeNull="true" optional="true"&gt;Success callback&lt;/param&gt;</span>
    <span class="comment">/// &lt;param name="onFailure" type="Function" mayBeNull="true" optional="true"&gt;Failure callback&lt;/param&gt;</span>
    <span class="comment">/// &lt;param name="userContext" mayBeNull="true" optional="true"&gt;Success callback&lt;/param&gt;</span>
    <span class="comment">/// &lt;param name="timeout" type="Number" optional="true" mayBeNull="true"&gt;Timeout in milliseconds&lt;/param&gt;</span>
    <span class="comment">/// &lt;param name="enableJsonp" type="Boolean" optional="true" mayBeNull="true"&gt;Whether to use <span class="caps">JSONP</span> if the servicePath is for a different domain (default is true).&lt;/param&gt;</span>
    <span class="comment">/// &lt;param name="jsonpCallbackParameter" type="String" optional="true" mayBeNull="true"&gt;The name of the callback parameter for <span class="caps">JSONP</span> request (default is callback).&lt;/param&gt;</span>
    <span class="comment">/// &lt;returns type="Sys.Net.WebRequest" mayBeNull="true"&gt;Returns the request that was sent (null for <span class="caps">JSONP</span> requests).&lt;/returns&gt;</span>
}
</code></pre>
</section>
          <section>
            <h2>Comments</h2>
            <div id="disqus_thread"></div>
          </section>
        </article>
        <footer>
          <script type="text/javascript" src="/javascripts/disqus.js?v=2.0.0&amp;name=endlessobsession"></script><small>Copyright &copy; 2018 - Bryan Matthews &mdash; powered by&nbsp;<a href="https://github.com/jnordberg/wintersmith">Wintersmith</a></small>
          <script type="text/javascript" src="/javascripts/analytics.js?v=1.0.0&amp;id=UA-17782995-1"></script>
        </footer>
      </main>
    </div>
  </body>
</html>