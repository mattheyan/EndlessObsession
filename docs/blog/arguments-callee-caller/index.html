<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>arguments...callee...caller... - The Endless Obsession</title><meta name="author" content="Bryan Matthews"><meta name="description" content="The personal blog of Bryan Matthews"><!-- Viewport and Media Queries: http://t.co/dKP3o1e --><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="http://endlessobsession.com/" rel="canonical"><link href="/infinity-symbol.png" rel="icon"><link href="/atom.xml" rel="alternate" type="application/atom+xml" title="The Endless Obsession"><link href="/stylesheets/normalize-3.0.2.css" media="screen, projection" rel="stylesheet" type="text/css"><link href="/stylesheets/theme-2.0.css" media="screen, projection" rel="stylesheet" type="text/css"><link href="/stylesheets/tomorrow.css" media="screen, projection" rel="stylesheet" type="text/css"></head><body><div class="container"><header role="banner"><hgroup><h1><a href="http://endlessobsession.com/">The Endless Obsession</a></h1><small>better code</small></hgroup><nav role="navigation"><ul><li><a href="http://endlessobsession.com/">Home</a></li><li><a href="http://endlessobsession.com/about" rel="author">About</a></li><li><a href="http://endlessobsession.com/blog/archives">Blog</a></li></ul><form action="http://google.com/search"><fieldset role="search"><input type="hidden" name="q" value="site:http://endlessobsession.com/"><input class="search" type="text" name="q" results="0" placeholder="Search"></fieldset></form></nav><nav role="complementary"><ul><li><a href="/atom.xml" title="RSS">RSS</a></li><li><a href="https://github.com/mattheyan" title="Github: mattheyan" target="_blank">Github</a></li><li><a href="https://twitter.com/BryanMatthews" title="Twitter: @BryanMatthews" target="_blank">Twitter</a></li></ul></nav></header><main><article><header><h2 class="title">arguments...callee...caller...</h2><div class="byline"><span class="author">Bryan Matthews</span><time datetime="2010-06-10" pubdate>Jun 10th, 2010</time></div></header><section><p><em>Originally posted May 3&nbsp;2010</em></p>
<p>Recently I spent some time looking at generating a stack trace in JavaScript for the purpose of error reporting.  There are plenty of <a href="http://eriwen.com/javascript/stacktrace-update/">existing</a> <a href="http://helephant.com/2007/05/diy-javascript-stack-trace/">projects</a> out there that solve this problem, so I wouldn’t recommend rolling your&nbsp;own.</p>
<p>As a result of this I came across some odd behavior in JavaScript.  The code I was working with takes advantage of the special “arguments” variable (the “array” of arguments passed to the current function), which has a special “callee” property (the function that was called), which also has a special “caller” property (the function that called this function).  You can probably see how this would be tempting if you’re trying to construct a stack trace.  Unfortunately, this information is attached to the function object rather than some sort of “function invocation” object.  There are at least two cases where this makes constructing an accurate stack trace&nbsp;impossible.</p>
<ol>
<li>Function recursively calls itself.<ul>
<li>Since the caller property is attached to the function itself there is no
way of knowing (through this information alone) how many times the function was&nbsp;called.</li>
</ul>
</li>
<li>Function A calls function B, which then calls function A…<ul>
<li>Even if there are terminating condition, the code that attempts to
reconstruct the stack trace (using “callee” and “caller”) will not
terminate.  There is a good description of this behavior
<a href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Function/caller">here</a>.</li>
</ul>
</li>
</ol>
<p>I was primarily interested in scenario 2, since this can cause errors.  To get around this you can detect that you have already encountered a given function and simply stop.  Of course this means that you lose any information that follows, but at least you won’t hang the&nbsp;browser.</p>
<p>Conclusion:  always check <span class="caps">MDC</span>&nbsp;:)</p>
<p><a href="http://eriwen.com/javascript/stacktrace-update/">http://eriwen.com/javascript/stacktrace-update/</a></p>
<p><a href="http://helephant.com/2007/05/diy-javascript-stack-trace/">http://helephant.com/2007/05/diy-javascript-stack-trace/</a></p>
<p><a href="http://bytes.com/topic/javascript/answers/470251-recursive-functions-arguments-callee-caller">http://bytes.com/topic/javascript/answers/470251-recursive-functions-arguments-callee-caller</a></p>
<p><a href="http://msdn.microsoft.com/en-us/library/7t96kt3h">http://msdn.microsoft.com/en-us/library/7t96kt3h</a></p>
<p><a href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Function/caller">https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Function/caller</a></p>
</section><section><h2>Comments</h2><div id="disqus_thread"></div></section></article><footer><script type="text/javascript" src="/javascripts/disqus.js?v=2.0.0&amp;name=endlessobsession"></script><small>Copyright &copy; 2022 - Bryan Matthews &mdash; powered by&nbsp;<a href="https://github.com/jnordberg/wintersmith">Wintersmith</a></small><script type="text/javascript" src="/javascripts/analytics.js?v=1.0.0&amp;id=UA-17782995-1"></script></footer></main></div></body></html>