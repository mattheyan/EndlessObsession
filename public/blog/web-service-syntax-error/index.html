
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Web Service Syntax Error??? - The Endless Obsession</title>
  <meta name="author" content="Bryan Matthews">

  
  <meta name="description" content="Originally posted April 7 2010 Ok, I&#8217;ll start this post off with some background. A couple of years ago I wrote a SOAP web service that manages &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://endlessobsession.heroku.com/blog/web-service-syntax-error">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="The Endless Obsession" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">The Endless Obsession</a></h1>
  
    <h2>better code</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:endlessobsession.heroku.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Web Service Syntax Error???</h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-10T20:37:00-04:00" pubdate data-updated="true">Jun 10<span>th</span>, 2010</time>
        
      </p>
    
  </header>


<div class="entry-content"><p><em>Originally posted April 7 2010</em></p>

<p>Ok, I&#8217;ll start this post off with some background.  A couple of years ago I wrote a SOAP web service that manages printing for multiple users through a web application.  Sounds familiar, right?  Anyway, the client that interacts with the web service uses the Microsoft AJAX JavaScript framework (version 1).  The web service is hosted on a different server and domain.  However, since this is an internal application with a small number of users they were content to enable cross-domain data access and be done with it.</p>

<p>A few weeks ago one of my coworkers was revisiting the client portion, which just happened to be upgraded to the <a href="http://ajax.codeplex.com/">beta version of the AJAX JavaScript framework</a>.  He started to see a syntax error, which I determined was occurring when handling the web service response.  I knew that the client framework supported JSONP in some form, and I also noticed an interesting &#8220;jsonp&#8221; query string argument in the web service call.  Believe it or not, the client was trying to use JSONP, even though the web service response was XML!  This obviously would result in a syntax error when trying to deserialize.</p>

<p>After looking over the JavaScript code I determined that the WebServiceProxy was using JSONP if either the protocol or host of the request was different than the current page.  I now know in hindsight that the documentation (at least in code) of WebServiceProxy.invoke clearly states this.  Luckily, the &#8220;enableJsonp&#8221; parameter can be set to <em>false</em> to override this behavior.</p>

<p>So, the bottom line is:  if you&#8217;re accessing a web service across domains and you don&#8217;t want to use JSONP, you have to set the  &#8220;enableJsonp&#8221; argument to <em>false</em>.  Here&#8217;s the method signature and documentation&#8230;</p>

<p>WebServiceProxy.invoke(servicePath, methodName, useGet, params, onSuccess, onFailure, userContext, timeout, enableJsonp, jsonpCallbackParameter) {</p>

<p>/// <summary locid="M:J#Sys.Net.WebServiceProxy.invoke"></summary></p>

<p>/// <param name="servicePath" type="String">Path to the webservice</param></p>

<p>/// <param name="methodName" type="String" mayBeNull="true" optional="true">Method to invoke</param></p>

<p>/// <param name="useGet" type="Boolean" optional="true" mayBeNull="true">Controls whether requests use HttpGet</param></p>

<p>/// <param name="params" mayBeNull="true" optional="true">Method args.</param></p>

<p>/// <param name="onSuccess" type="Function" mayBeNull="true" optional="true">Success callback</param></p>

<p>/// <param name="onFailure" type="Function" mayBeNull="true" optional="true">Failure callback</param></p>

<p>/// <param name="userContext" mayBeNull="true" optional="true">Success callback</param></p>

<p>/// <param name="timeout" type="Number" optional="true" mayBeNull="true">Timeout in milliseconds</param></p>

<p>/// <param name="enableJsonp" type="Boolean" optional="true" mayBeNull="true">Whether to use JSONP if the servicePath is for a different domain (default is true).</param></p>

<p>/// <param name="jsonpCallbackParameter" type="String" optional="true" mayBeNull="true">The name of the callback parameter for JSONP request (default is callback).</param></p>

<p>/// <returns type="Sys.Net.WebRequest" mayBeNull="true">Returns the request that was sent (null for JSONP requests).</returns></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Bryan Matthews</span></span>

      








  


<time datetime="2010-06-10T20:37:00-04:00" pubdate data-updated="true">Jun 10<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/asp-net-ajax/'>asp.net ajax</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://endlessobsession.heroku.com/blog/web-service-syntax-error" data-via="BryanMatthews" data-counturl="http://endlessobsession.heroku.com/blog/web-service-syntax-error" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/ms-ajax-and-json-date-serialization" title="Previous Post: MS AJAX and JSON Date Serialization">&laquo; MS AJAX and JSON Date Serialization</a>
      
      
        <a class="basic-alignment right" href="/blog/arguments-callee-caller" title="Next Post: arguments...callee...caller...">arguments...callee...caller... &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/carolina-code-camp-2012-presentation">Carolina Code Camp 2012 Presentation</a>
      </li>
    
      <li class="post">
        <a href="/blog/learning-f-with-tdd-part-2">Learning F# with TDD: Part 2</a>
      </li>
    
      <li class="post">
        <a href="/blog/exoweb-type-loading-changes">ExoWeb type loading changes</a>
      </li>
    
      <li class="post">
        <a href="/blog/learning-fsharp-with-tdd-part-1">Learning F# with TDD: Part 1</a>
      </li>
    
      <li class="post">
        <a href="/blog/disable-the-audible-beep-in-mac-terminal">Disable the audible beep in Mac Terminal</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/mattheyan">@mattheyan</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'mattheyan',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("BryanMatthews", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/BryanMatthews" class="twitter-follow-button" data-show-count="false">Follow @BryanMatthews</a>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/mattheyan?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Bryan Matthews -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
